{"ast":null,"code":"import React,{useState}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import Axios from'axios';import'./login.css';import Navbar from'./navbar/Navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const LogIn=()=>{var _location$state;////////// home flight data pass\nconst location=useLocation();const selectedDate=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.selectedDate;console.log(selectedDate);const[credentials,setCredentials]=useState({email:'',password:''});const[isChecked,setIsChecked]=useState(false);// New state for the checkbox\nconst navigate=useNavigate();const handleChange=e=>{const{name,value}=e.target;setCredentials({...credentials,[name]:value});};const handleCheckboxChange=e=>{setIsChecked(e.target.checked);};const[selectedFlight,setSelectedFlight]=useState([]);// Updated state for selectedFlight\nconst handleLogin=async e=>{e.preventDefault();if(!isChecked){alert('Please agree to the Policy and Terms of Use.');return;}try{const response=await Axios.post('http://localhost:3001/login',{email:credentials.email,password:credentials.password});console.log(response.data);if(response.data.success){alert('Login successful!');// Check if flight data is present in location state\nif(location.state&&location.state.selectedFlight){// Redirect to Passenger component\nnavigate('/booking',{state:{username:response.data.username,selectedFlight:location.state.selectedFlight,selectedDate:selectedDate}});console.log(setSelectedFlight);console.log(selectedFlight);}else{// Redirect to userSuccess component\nnavigate('/userSuccess',{state:{username:response.data.username}});}}else{alert('Invalid credentials. Please try again.');}}catch(error){console.error('Error during login:',error);alert('Error during login. Please try again.');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"AAA\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-black\",style:{borderRadius:'25px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"center\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-center h2 fw-bold mb-5 mx-1 mx-md-4 mt-0 \",children:\"LogIn\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group \",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Your Email\",value:credentials.email,onChange:handleChange,className:\"form-control\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group \",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Your Password\",value:credentials.password,onChange:handleChange,className:\"form-control\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check \",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"flexCheckDefault\",className:\"form-check-input\",onChange:handleCheckboxChange// Use handleCheckboxChange for checkbox\n}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label ms-2\",htmlFor:\"flexCheckDefault\",children:\"Agree with the Policy and Terms of Use\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mb-4\",children:\"LogIn\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"text-green-600\",children:\"Create New Account\"})})]})]})})})})})})]});};export default LogIn;","map":{"version":3,"names":["React","useState","Link","useNavigate","useLocation","Axios","Navbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LogIn","_location$state","location","selectedDate","state","console","log","credentials","setCredentials","email","password","isChecked","setIsChecked","navigate","handleChange","e","name","value","target","handleCheckboxChange","checked","selectedFlight","setSelectedFlight","handleLogin","preventDefault","alert","response","post","data","success","username","error","children","className","style","borderRadius","onSubmit","type","placeholder","onChange","required","id","htmlFor","to"],"sources":["C:/Users/sohan bodana/Downloads/pr/projects/jobs/cartify/src/Component/login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport Axios from 'axios';\r\nimport './login.css';\r\nimport Navbar from './navbar/Navbar';\r\n\r\nconst LogIn = () => {\r\n\r\n  ////////// home flight data pass\r\n\r\n  const location = useLocation();\r\n  const selectedDate = location.state?.selectedDate;\r\n  console.log(selectedDate);\r\n\r\n\r\n\r\n  const [credentials, setCredentials] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const [isChecked, setIsChecked] = useState(false); // New state for the checkbox\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setCredentials({\r\n      ...credentials,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleCheckboxChange = (e) => {\r\n    setIsChecked(e.target.checked);\r\n  };\r\n  const [selectedFlight, setSelectedFlight] = useState([]); // Updated state for selectedFlight\r\n\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!isChecked) {\r\n      alert('Please agree to the Policy and Terms of Use.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await Axios.post('http://localhost:3001/login', {\r\n        email: credentials.email,\r\n        password: credentials.password,\r\n      });\r\n\r\n      console.log(response.data);\r\n\r\n      if (response.data.success) {\r\n\r\n        alert('Login successful!');\r\n\r\n        // Check if flight data is present in location state\r\n        if (location.state && location.state.selectedFlight) {\r\n          // Redirect to Passenger component\r\n          navigate('/booking', {\r\n            state: {\r\n              username: response.data.username,\r\n              selectedFlight: location.state.selectedFlight,\r\n              selectedDate: selectedDate,\r\n            },\r\n          });\r\n          console.log(setSelectedFlight);\r\n          console.log(selectedFlight);\r\n        }\r\n        else {\r\n          // Redirect to userSuccess component\r\n          navigate('/userSuccess', {\r\n            state: {\r\n              username: response.data.username,\r\n            },\r\n          });\r\n        }\r\n\r\n      }\r\n      else {\r\n        alert('Invalid credentials. Please try again.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error during login:', error);\r\n      alert('Error during login. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className='AAA'>\r\n        <div className=\"container\">\r\n          <center>\r\n          <div className='card text-black' style={{ borderRadius: '25px' }}>\r\n            <div className='card-body'>\r\n              <center>\r\n\r\n                  <p className=\"text-center h2 fw-bold mb-5 mx-1 mx-md-4 mt-0 \">LogIn</p>\r\n\r\n                  <form onSubmit={handleLogin}>\r\n                    <div className=\"form-group \">\r\n                      <label>Email:</label>\r\n                      <input\r\n                        type=\"email\"\r\n                        name=\"email\"\r\n                        placeholder='Your Email'\r\n                        value={credentials.email}\r\n                        onChange={handleChange}\r\n                        className='form-control'\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div className=\"form-group \">\r\n                      <label>Password:</label>\r\n                      <input\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        placeholder='Your Password'\r\n                        value={credentials.password}\r\n                        onChange={handleChange}\r\n                        className='form-control'\r\n                        required\r\n                      />\r\n                    </div>\r\n\r\n                    <div className='form-check '>\r\n                      <input\r\n                        type='checkbox'\r\n                        id='flexCheckDefault'\r\n                        className='form-check-input'\r\n                        onChange={handleCheckboxChange} // Use handleCheckboxChange for checkbox\r\n                      />\r\n                      <label className='form-check-label ms-2' htmlFor='flexCheckDefault'>\r\n                        Agree with the Policy and Terms of Use\r\n                      </label>\r\n                    </div>\r\n\r\n                    <button className='btn btn-primary mb-4'>LogIn</button>\r\n                    <Link to=\"/signup\">\r\n                      <h5 className=\"text-green-600\" >Create New Account</h5>\r\n                    </Link>\r\n                  </form>\r\n              </center>\r\n            </div>\r\n          </div>\r\n          </center>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LogIn;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}